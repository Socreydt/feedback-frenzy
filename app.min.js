function hideLoader(){$("#contentLoader").addClass("hide-loader");setTimeout(function(){$("#contentLoader").hide().removeClass("hide-loader")},600)}function infiniteLoad(){var n={start:_start,take:_take};$.ajax({url:"/api/onthefly/infinite",type:"POST",contentType:"application/json",data:JSON.stringify(n),success:function(n){var t=$.templates("#ff-collection-list-tmpl");$("#ff-list-completed").append(t.render(n));hideLoader();_completedInitLoaded=!0;n.IsMore==!0?$("#btnGetMore").css("display","block"):$("#btnGetMore").hide()},error:function(n){console.log(n.responseText)}})}var _start=0,_take=10,_completedInitLoaded=!1,_ffSendFeedbackInit=!1,_ffRequestFeedbackInit=!1,_currentId="",showLoader,ffHome=function(){_currentId="";showLoader=setTimeout("$('#contentLoader').show()",300);$.getJSON("/api/onthefly/pending",function(n){var t=$.templates("#ff-collection-cards-tmpl");$("#ff-body-home").empty().html(t.render(n));$("#requestsCount").html(n.Total);n.UserType=="Faculty"?($("#lnkSendFeedback").show(),$("#lnkReqFeedback").remove()):n.UserType=="Resident"&&($("#lnkReqFeedback").show(),$("#lnkSendFeedback").remove())}).done(function(){hideLoader();$(".ff-page").hide();$("#ff-page-home").show()})},ffCompletedFeedback=function(){_completedInitLoaded==!1&&($("#ff-list-completed").empty(),showLoader=setTimeout("$('#contentLoader').show()",300),infiniteLoad())},ffDetails=function(n){_currentId=n;showLoader=setTimeout("$('#contentLoader').show()",300);$.getJSON("/api/onthefly/request/"+n,function(n){var r=$.templates("#ff-complete-request-tmpl"),t,i;$("#ff-body-requestdetails").html(r.render(n.Request));t=n.UserType;i=n.Request.Status;t=="Resident"&&i=="Pending"?$("#btnDeleteRequest").show():$("#btnDeleteRequest").hide()}).done(function(){hideLoader();$(".ff-page").hide();$("#ff-page-requestdetails").show();autosize($("textarea"))})},ffSendFeedback=function(){if(_currentId="",_ffSendFeedbackInit==!1){var n;showLoader=setTimeout("$('#contentLoader').show()",300);$.getJSON("/api/onthefly/residents",function(t){n={SelectionList:t.Residents};var i=$.templates("#ff-select-item-tmpl");$("#select-a-recipicant").html(i.render(n))}).done(function(){hideLoader();_ffSendFeedbackInit=!0;$(".ff-page").hide();$("#ff-page-sendfeedback").show();$(".mdl-layout__content","#ff-page-sendfeedback").scrollTop(0)})}else hideLoader(),$(".ff-page").hide(),$("#ff-page-sendfeedback").show(),$(".ff-textarea__input").val(""),$(".mdl-layout__content","#ff-page-sendfeedback").scrollTop(0)},ffCompleteRequest=function(n){_currentId=n;showLoader=setTimeout("$('#contentLoader').show()",300);$.getJSON("/api/onthefly/request/"+n,function(t){var u=$.templates("#ff-complete-request-tmpl"),r,i;$("#ff-body-completerequest").html(u.render(t.Request));r=document.createElement("div");r.className="mdl-progress mdl-js-progress mdl-progress__indeterminate";r.style.width="100%";componentHandler.upgradeElement(r);document.getElementById("loadingProgresBar").appendChild(r);t.UserType=="Faculty"&&(i=document.createElement("div"),i.className="mdl-button mdl-js-button mdl-js-ripple-effect ff-btn-mainaction",i.id="btnSendFeedbackNow",i.innerHTML="Send feedback",i.dataset.reqid=n,componentHandler.upgradeElement(i),document.getElementById("btnSendFeedbackContainer").appendChild(i))}).done(function(){hideLoader();$(".ff-page").hide();$("#ff-page-completerequest").show();autosize($("textarea"));$(".mdl-layout__content","#ff-page-completerequest").scrollTop(0)})},ffRequestFeedback=function(){if(_currentId="",_ffRequestFeedbackInit==!1){var n;showLoader=setTimeout("$('#contentLoader').show()",300);$.getJSON("/api/onthefly/attendings",function(t){n={SelectionList:t.Attendings};var i=$.templates("#ff-select-item-tmpl");$("#select-a-faculty").html(i.render(n))}).done(function(){hideLoader();_ffRequestFeedbackInit=!0;$(".ff-page").hide();$("#ff-page-requestfeedback").show()})}else hideLoader(),$(".ff-page").hide(),$(".ff-textarea__input").val(""),$("#ff-page-requestfeedback").show()},allroutes=function(){},beforehit=function(){},routes={"/soak":{"/details/:id":ffDetails,"/request/:id":ffCompleteRequest,"/request-feedback":ffRequestFeedback,"/send-feedback":ffSendFeedback,"/":ffHome}},router=Router(routes);router.configure({strict:!1,html5history:!0,convert_hash_in_init:!0,on:allroutes,before:beforehit});router.init();$(document).ready(function(){var t,i,r,n;autosize($("textarea"));t=$("#feedback-date").pickadate({clear:"",close:"Cancel",format:"dddd, mmmm d, yyyy"});i=t.pickadate("picker");i.set("select",new Date);r=$("#request-date").pickadate({clear:"",close:"Cancel",format:"dddd, mmmm d, yyyy"});n=r.pickadate("picker");n.set("select",new Date);$("body").on("tap",".btn-select-container",function(n){n.preventDefault();$(this).toggleClass("active").next().slideToggle("fast")});$("body").on("tap",".recipicant-select-item",function(n){n.preventDefault();var t=$(this).find(".selection-item-body").html();$("#btn-selection-made").html(t).parent().toggleClass("active");$("#select-recipicant-list").slideToggle("fast")});$("body").on("tap",".topic-select-item",function(n){n.preventDefault();var t=$(this).find(".selection-item-body").html();$("#subject-selection").html(t).parent().toggleClass("active");$("#subject-select-list").slideToggle("fast")});$("body").on("tap","#completedTab",function(){ffCompletedFeedback()});$("body").on("tap","#btnGetMore",function(){_start=_start+10;$(this).hide();infiniteLoad()});$("body").on("tap",".ff-route",function(n){n.preventDefault();router.setRoute($(this).data("href"))});$("body").on("tap","#btnSendFeedbackNow",function(n){var t,i,r,u,f;n.preventDefault();$(this).hide();$("#loadingContainer").show();t=$("#txtStrengthRequest").val();(t==""||t==null)&&(t=null);i=$("#txtImprovementRequest").val();(i==""||i==null)&&(i=null);r=$("#txtAnswerRequest").val();(r==""||r==null)&&(r=null);u=$(this).data("reqid");u!=null&&u!=""&&(f={RequestId:u,Strengths:t,Improvements:i,Answer:r},$.ajax({url:"/api/onthefly/sendv2",type:"POST",contentType:"application/json",data:JSON.stringify(f),success:function(){router.setRoute("/soak/");_completedInitLoaded=!1;$("#btnSendFeedbackNow").show();$("#loadingContainer").hide()},error:function(n){console.log(n.responseText)}}))});$("body").on("tap","#btnRequestFeedbackNow",function(t){var r,i,u,f;t.preventDefault();$(this).hide();$("#request-loadingContainer").show();r=$("#select-a-faculty option:selected").val();r!=null&&(i=$("#txtRequestQuestion").val(),u=$("#select-a-general-topic option:selected").val(),i.trim()==""&&(i=null),f={FacultyId:r,Topic:u,Date:n.get("select","mm/dd/yyyy"),Question:i},$.ajax({url:"/api/onthefly/createv2",type:"POST",contentType:"application/json",data:JSON.stringify(f),success:function(){router.setRoute("/soak/");$("#btnRequestFeedbackNow").show();$("#request-loadingContainer").hide()},error:function(n){console.log(n.responseText)}}))});$("body").on("tap","#btnDeleteRequest",function(){if(_currentId!=null&&_currentId!=""){var n={id:_currentId};$.ajax({url:"/api/onthefly/removev2",type:"POST",contentType:"application/json",data:JSON.stringify(n),success:function(){router.setRoute("/soak/");_completedInitLoaded=!1;$("#btnSendFeedbackNow").show();$("#loadingContainer").hide()},error:function(n){console.log(n.responseText)}})}})});
//# sourceMappingURL=app.min.js.map
